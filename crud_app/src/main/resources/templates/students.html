<!DOCTYPE html>
<html lang="en"
xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymleaf.org/thymleaf-extras-springsecurity"
layout:decorate="~{layout}">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div layout:fragment="content">
    <div class="container my-2">
        <div class="card">
            <div class="card-body">
                <div th:switch="${students}" class="container my-5">
                    <p sec:authorize="hasRole('ADMIN')" class="my-5">
                        <a th:href="@{'/add'}" class="btn btn-primary"><i
                                class="fas fa-user-plus ml-2"> Add Student</i></a>
                    </p>

                    <div class="col-md-10">
                        <h2 th:case="null">No Student Yet</h2>
                        <div th:if="${succes}" class="al alert alert-success" role="alert">
                            <span th:text="${succes}"></span>
                        </div>
                        <div th:if="${succesMessage}" class="al alert alert-success" role="alert">
                            <span th:text="${succesMessage}"></span>
                        </div>
                        <div th:case="*">
                            <form th:action="@{students}" method="get">
                                <div class="mb-3">
                                    <label class="control-label">Mot Cle</label>
                                    <input placeholder="keyword" type="text" name="motCle" th:value="${motCle}" class="p-1">
                                    <button class="btn btn-primary">chercher</button>
                                </div>
                            </form>
                            <table class="table table-striped table-responsive-md">
                                <thead>
                                <tr>
                                    <th>Id</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Adress</th>
                                    <th>Phone</th>
                                    <th>Details</th>
                                    <th>Edit</th>
                                    <th>Delete</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="studentsList:${students}">
                                    <td th:text="${studentsList.id}"></td>
                                    <td th:text="${studentsList.name}"></td>
                                    <td th:text="${studentsList.email}"></td>
                                    <td th:text="${studentsList.adress}"></td>
                                    <td th:text="${studentsList.phone}"></td>
                                    <td><a th:href="@{/generatePdf/{id}(id=${studentsList.id})}" class="btn btn-info"><i class="fas fa-file-pdf ml-2"></i> PDF</a></td>
                                    <td sec:authorize="hasRole ('ADMIN')"><a th:href="@{/edit/{id}(id=${studentsList.id})}" class="btn btn-warning"><i
                                            class="fas fa-user-edit ml-2"></i></a></td>
                                    <td sec:authorize="hasRole ('ADMIN')"><a  th:href="@{/delete/{id}(id=${studentsList.id})}" class=" bdelete btn btn-danger"><i
                                            class="fas fa-user-times ml-2"></i></a></td>
                                </tr>
                                </tbody>
                            </table>
                            <!--<ul class="nav nav-pills">
                                <li th:each="pages,status:${pages}">
                                   <a th:class="${status.index==currentPage}?'btn btn-primary':'btn'"
                                      th:href="@{/students(page=${status.index},size=${size})}"
                                      th:text="${status.index+1}"
                                   ></a>
&lt;!&ndash;                                    <a class="btn" th:href="@{/students(page=${status.index},size=${size})}" th:text="${status.index}"></a>&ndash;&gt;
                                </li>
                            </ul>-->
                            <ul class="nav nav-pills">
                                <li th:each="pages,status:${pages}">
                                    <a th:class="${status.index==currentPage}?'btn btn-primary':'btn' "
                                       th:href="@{/students(page=${status.index},size=${size},motCle=${motCle})}"
                                       th:text="${status.index+1}"
                                    ></a>
                                </li>
                            </ul>

                        </div>


                    </div>

                </div>

            </div>

        </div>
    </div>
</div>

</body>
</html>